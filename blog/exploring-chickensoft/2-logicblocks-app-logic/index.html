<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https://nilsiker.github.io">

    
    <title>nilsiker ‚Ä¢ Exploring Chickensoft #2: LogicBlocks</title>

    
    
    
        <link rel=icon href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 105 55"><text y=".7em" font-size="82">ü¶Ä</text></svg>'>
    

    
    

    
    
    
        <link rel="stylesheet" href="https://nilsiker.github.io/inter_subset_en.css?h=d8cf4ad058d6c3a4015b">
    

    
        <link rel="stylesheet" href="https://nilsiker.github.io/main.css?h=4a3dff148c520f191505" />
        <link rel="stylesheet" href="https://nilsiker.github.io/skins/rusty.css?h=aed5477675e19161c8fa" />

    <meta name="color-scheme" content="light dark" />
        <meta name="description" content="Implementing app logic using state machines." />
        <meta property="og:description" content="Implementing app logic using state machines." />

    
        <meta name="robots" content="index, nofollow" />
    

    <meta property="og:title" content="Exploring Chickensoft #2: LogicBlocks" />
    <meta property="og:type" content="article" />

    
    
    
    
        
    

    

    
    
    
    

    
        
        
    

    <meta property="og:image" content="https://nilsiker.github.io/img/profile.png?h=b447f87cfb7fe21dfe05" />
    <meta property="og:image:width" content="400" />
    <meta property="og:image:height" content="400" />
    <meta name="twitter:image" content="https://nilsiker.github.io/img/profile.png?h=b447f87cfb7fe21dfe05" />
    <meta name="twitter:card" content="summary_large_image" />

<meta property="og:locale" content="en_GB" />

    <meta property="og:url" content="https:&#x2F;&#x2F;nilsiker.github.io&#x2F;blog&#x2F;exploring-chickensoft&#x2F;2-logicblocks-app-logic&#x2F;" /><meta property="og:site_name" content="nilsiker"><meta http-equiv="Content-Security-Policy"
content="default-src 'self';font-src &#x27;self&#x27; data: 'self';img-src &#x27;self&#x27; https:&#x2F;&#x2F;* data:;style-src &#x27;self&#x27; https:&#x2F;&#x2F;cdn.jsdelivr.net &#x27;unsafe-inline&#x27; &#x27;unsafe-eval&#x27; 'unsafe-inline';frame-src https:&#x2F;&#x2F;www.youtube-nocookie.com;connect-src 'self';script-src 'self' 'self' https://cdn.jsdelivr.net 'unsafe-inline' 'unsafe-eval'">

        <noscript><link rel="stylesheet" href="https://nilsiker.github.io/no_js.css"/></noscript>
        <script type="text/javascript" src="https://nilsiker.github.io/js/initializeTheme.min.js"></script>
        <script defer src="https://nilsiker.github.io/js/themeSwitcher.min.js"></script><script defer src="https://nilsiker.github.io/search_index.en.js?h=75eecc0275f60b2aba78"></script>
        <script defer src="https://nilsiker.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e"></script>

        </head>


<body>
    <header>
    <nav class="navbar">
        <div class="nav-title">
            <a class="home-title" href="https://nilsiker.github.io">nilsiker</a>
        </div>
            <div class="nav-navs">
                <ul>
                        
                            <li>
                                
                                <a class="nav-links no-hover-padding" href="https://nilsiker.github.io/blog/">
                                blog
                                </a>
                            </li>
                        
                            <li>
                                
                                <a class="nav-links no-hover-padding" href="https://nilsiker.github.io/archive/">
                                archive
                                </a>
                            </li>
                        
                            <li>
                                
                                <a class="nav-links no-hover-padding" href="https://nilsiker.github.io/tags/">
                                tags
                                </a>
                            </li>
                        
                            <li>
                                
                                <a class="nav-links no-hover-padding" href="https://nilsiker.github.io/projects/">
                                projects
                                </a>
                            </li>
                        <div class="nav-navs" id="menu-icons-group">
                        <li class="js">
                            <div role="button" tabindex="0" id="search-button" class="search-icon interactive-icon" title="Click or press $SHORTCUT to open search" aria-label="Click or press $SHORTCUT to open search">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                                    <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
                                </svg>
                            </div>
                        </li>

                        
                        

                        <li class="theme-switcher-wrapper js"><div
        title="Toggle dark&#x2F;light mode"
        class="theme-switcher"
        tabindex="0"
        role="button"
        aria-label="Toggle dark mode"
        aria-pressed="false">
    </div><div
        title="Reset mode to default"
        class="theme-resetter arrow"
        tabindex="0"
        role="button"
        aria-hidden="true"
        aria-label="Reset mode to default">
    </div>

</li>
</div>
                </ul>
            </div>
        
    </nav>
</header>

    <div class="content">

        
        




<main>
    <article>
        <h1 class="article-title">
            Exploring Chickensoft #2: LogicBlocks
        </h1>

        <ul class="meta">
                <li>3rd Jan 2025</li><li title="2343 words"><span class='separator' aria-hidden='true'>‚Ä¢</span>12 min read</li><li class="tag"><span class='separator' aria-hidden='true'>‚Ä¢</span>Tags:&nbsp;</li><li class="tag"><a href="https://nilsiker.github.io/tags/godot/">Godot</a>,&nbsp;</li><li class="tag"><a href="https://nilsiker.github.io/tags/c/">C#</a>,&nbsp;</li><li class="tag"><a href="https://nilsiker.github.io/tags/net/">.NET</a>,&nbsp;</li><li class="tag"><a href="https://nilsiker.github.io/tags/chickensoft/">Chickensoft</a>,&nbsp;</li><li class="tag"><a href="https://nilsiker.github.io/tags/fsm/">fsm</a>,&nbsp;</li><li class="tag"><a href="https://nilsiker.github.io/tags/state-machines/">state machines</a></li>
        </ul>

        <section class="body">
    <section class="series-page-intro">
                <p><a href="https://nilsiker.github.io/blog/exploring-chickensoft/1-godotenv-and-godotgame/">&lt; previous</a> | <a href="https://nilsiker.github.io/blog/exploring-chickensoft/">üìï Exploring Chickensoft</a></p>

            </section>
<blockquote>
<p>‚ö†Ô∏è This post assumes you have a basic understanding of Nodes and Scenes in Godot and at least mid-level familiarity with C# syntax if you plan to code along!</p>
</blockquote>
<h1 id="introduction">Introduction</h1>
<p>In the last part, we downloaded Godot and setup a project from the Chickensoft GodotGame template. Not terribly riveting, but a good start nonetheless!</p>
<p>In this part, we‚Äôll dive straight into implementing game logic that ends up being decoupled from the game engine.</p>
<p>To achieve this, we will start off by using LogicBlocks - a hierarchical state machine package for C# by Chickensoft.</p>
<blockquote>
<p>üôãüèº The cool thing about decoupling the game logic from the engine (and LogicBlocks being a general C# package - not a Godot package) means that it makes our game code <em>vastly easier</em> to port to other game engines.</p>
<p>The inner machinations of our game logic and state can live outside of Godot - instead Godot acts as the visual representation of our game.</p>
</blockquote>
<p>Prepare for a long ride! üç´</p>
<h1 id="scope">Scope</h1>
<p>At the end of this post, we will have finished the following steps:</p>
<ul>
<li>Implement two major app states, InMainMenu and InGame.</li>
<li>Reorganize our class files, moving closer to the Chickensoft project structure.</li>
<li>Add a state to introduce intermediary fade transitions.</li>
</ul>
<p>The goal is to introduce state machines to our project, aiming to build a solid game architecture that we can easily expand on using Chickensoft tools.</p>
<h1 id="implementation">Implementation</h1>
<p>I will start off by shouting from the rooftops <strong><em>that <a href="https://github.com/chickensoft-games/LogicBlocks">LogicBlocks</a> is a really cool package!</em></strong></p>
<blockquote>
<p>üôãüèº They‚Äôre all I dreamed of accomplishing with <a href="/blog/finite-state-machine-1">my FSM series</a>. I could consider myself defeated - but frankly it‚Äôs more so being ‚ú® blessed ‚ú®.</p>
</blockquote>
<p>With LogicBlocks, we can create complex logic for our game nodes by separating it into different states. Part of the value proposition is that we won‚Äôt create a tangled mess while doing so.</p>
<blockquote>
<p>üôãüèº Of course, you can still end up with a mess, but it‚Äôll be an <em>idiomatic</em> mess. That‚Äôs the most preferable kind of mess, if you ask me!</p>
</blockquote>
<p>I remember promising simple beginnings, so we <strong>will</strong> be keeping it simple! This means that the LogicBlock usage might seem overkill, but I‚Äôll try my best at explaining why we should bother at all.</p>
<h2 id="installing-logicblocks">Installing LogicBlocks</h2>
<p>The packages need to be added to our project. The LogicBlock docs recommends including the introspection and diagram generator for added convenience and to get automatically generated diagrams for your state machines (we‚Äôll take a look at that later).</p>
<p>To include the packages in the right spot in our project file, I‚Äôll use good old-fashioned copypasting:</p>
<pre data-lang="xml" class="language-xml z-code"><code class="language-xml" data-lang="xml"><span class="z-text z-xml"> <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&lt;</span><span class="z-entity z-name z-tag z-localname z-xml">ItemGroup</span><span class="z-punctuation z-definition z-tag z-end z-xml">&gt;</span></span>
</span><span class="z-text z-xml">    <span class="z-comment z-block z-xml"><span class="z-punctuation z-definition z-comment z-begin z-xml">&lt;!--</span> Production dependencies go here! <span class="z-punctuation z-definition z-comment z-end z-xml">--&gt;</span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&lt;</span><span class="z-entity z-name z-tag z-localname z-xml">PackageReference</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Include</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">&quot;</span>Chickensoft.LogicBlocks<span class="z-punctuation z-definition z-string z-end z-xml">&quot;</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Version</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">&quot;</span>5.13.0<span class="z-punctuation z-definition z-string z-end z-xml">&quot;</span></span> <span class="z-punctuation z-definition z-tag z-end z-xml">/&gt;</span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&lt;</span><span class="z-entity z-name z-tag z-localname z-xml">PackageReference</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Include</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">&quot;</span>Chickensoft.Introspection.Generator<span class="z-punctuation z-definition z-string z-end z-xml">&quot;</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Version</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">&quot;</span>2.0.0<span class="z-punctuation z-definition z-string z-end z-xml">&quot;</span></span> <span class="z-punctuation z-definition z-tag z-end z-xml">/&gt;</span></span>
</span><span class="z-text z-xml">    <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&lt;</span><span class="z-entity z-name z-tag z-localname z-xml">PackageReference</span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Include</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">&quot;</span>Chickensoft.LogicBlocks.DiagramGenerator<span class="z-punctuation z-definition z-string z-end z-xml">&quot;</span></span> <span class="z-entity z-other z-attribute-name z-localname z-xml">Version</span><span class="z-punctuation z-separator z-key-value z-xml">=</span><span class="z-string z-quoted z-double z-xml"><span class="z-punctuation z-definition z-string z-begin z-xml">&quot;</span>5.13.0<span class="z-punctuation z-definition z-string z-end z-xml">&quot;</span></span> <span class="z-punctuation z-definition z-tag z-end z-xml">/&gt;</span></span>
</span><span class="z-text z-xml">  <span class="z-meta z-tag z-xml"><span class="z-punctuation z-definition z-tag z-begin z-xml">&lt;/</span><span class="z-entity z-name z-tag z-localname z-xml">ItemGroup</span><span class="z-punctuation z-definition z-tag z-end z-xml">&gt;</span></span>
</span></code></pre>
<p>I‚Äôll check my project sanity by hitting F5 in the editor - my game still runs.</p>
<h2 id="defining-app-states">Defining App states</h2>
<p>Earlier, I created <code>App.cs</code>. Now, let‚Äôs put that on our App node and get coding!</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-keyword z-control z-import z-cs">using</span> <span class="z-meta z-path z-cs">System</span><span class="z-punctuation z-terminator z-cs">;</span>
</span><span class="z-source z-cs"><span class="z-keyword z-control z-import z-cs">using</span> <span class="z-meta z-path z-cs">Godot</span><span class="z-punctuation z-terminator z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">App</span> <span class="z-punctuation z-separator z-type z-cs">:</span> <span class="z-entity z-other z-inherited-class z-cs">Node</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></code></pre>
<p>Our naked App script looks like this. I‚Äôll introduce the LogicBlocks boilerplate piece by piece and explain it as I go.</p>
<p>Let‚Äôs add the boilerplate and have a look.</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-meta z-namespace z-cs"><span class="z-storage z-type z-namespace z-cs">namespace</span> <span class="z-entity z-name z-namespace z-cs">Eggsploration</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-keyword z-control z-import z-cs">using</span> <span class="z-meta z-path z-cs">Chickensoft</span><span class="z-punctuation z-separator z-namespace z-cs">.</span><span class="z-meta z-path z-cs">Introspection</span><span class="z-punctuation z-terminator z-cs">;</span>
</span><span class="z-source z-cs"><span class="z-keyword z-control z-import z-cs">using</span> <span class="z-meta z-path z-cs">Chickensoft</span><span class="z-punctuation z-separator z-namespace z-cs">.</span><span class="z-meta z-path z-cs">LogicBlocks</span><span class="z-punctuation z-terminator z-cs">;</span>
</span><span class="z-source z-cs"><span class="z-keyword z-control z-import z-cs">using</span> <span class="z-meta z-path z-cs">Godot</span><span class="z-punctuation z-terminator z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">App</span> <span class="z-punctuation z-separator z-type z-cs">:</span> <span class="z-entity z-other z-inherited-class z-cs">Node</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">State</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">AppLogic</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">Logic</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs"> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-get z-cs">get</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-set z-cs">set</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-operator z-assignment z-cs">=</span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-entity z-other z-inherited-class z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-support z-type z-cs">IBinding</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">Binding</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs"> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-get z-cs">get</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-set z-cs">set</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-operator z-assignment z-cs">=</span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">override</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">_Ready</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> </span><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">Logic</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">Binding</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Bind</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-meta z-annotation z-cs"><span class="z-punctuation z-definition z-annotation z-begin z-cs">[</span><span class="z-variable z-annotation z-cs">Meta</span><span class="z-punctuation z-definition z-annotation z-end z-cs">]</span></span>
</span><span class="z-source z-cs"><span class="z-meta z-annotation z-cs"><span class="z-punctuation z-definition z-annotation z-begin z-cs">[</span><span class="z-variable z-annotation z-cs">LogicBlock</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-annotation z-cs"><span class="z-meta z-group z-cs"><span class="z-keyword z-operator z-reflection z-cs">typeof</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span><span class="z-meta z-group z-cs"><span class="z-support z-type z-cs">State</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span><span class="z-punctuation z-separator z-argument z-cs">,</span> <span class="z-variable z-parameter z-cs">Diagram</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-constant z-language z-cs">true</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-meta z-annotation z-cs"><span class="z-punctuation z-definition z-annotation z-end z-cs">]</span></span>
</span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">AppLogic</span> <span class="z-punctuation z-separator z-type z-cs">:</span> <span class="z-entity z-other z-inherited-class z-cs">LogicBlock</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">State</span></span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">override</span> <span class="z-support z-type z-cs">Transition</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">GetInitialState</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">State</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">InMainMenu</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Input</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Output</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">abstract</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">State</span></span> : <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">StateLogic</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-method z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">State</span></span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> partial record InMainMenu : State { <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs">    </span><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">InGame</span></span> : <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">State</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs"> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs">    </span><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">ClosingApplication</span></span> : <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">State</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs"> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs">  </span><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span><span class="z-source z-cs"><span class="z-invalid z-illegal z-stray z-brace z-cs">}</span>
</span></code></pre>
<p>A definition lightning round might be in order:</p>
<ul>
<li><code>Logic</code>: This is a reference to the LogicBlocks state machine. This is mainly used to send inputs into the machine.</li>
<li><code>Binding</code>: This is a reference to the state binding. It is primarily used to listen to outputs produced by the machine.</li>
<li><code>[Meta]</code>: This adds some convenience for our LogicBlock, such as automatically preallocating and setting the states that are used in the machine. As for details; it‚Äôs blinders on for this one! To quote the creators of Chickensoft:
<blockquote>
<p>You don‚Äôt need to fully understand this package to make the most of it. In fact, you may never need to use it directly since you are more likely to encounter it as a dependency of one of the other Chickensoft tools.</p>
</blockquote>
</li>
<li><code>[LogicBlock(typeof(AppLogic), Diagram = true)]</code>: This attribute extends the class, enabling LogicBlocks generators to generate serialization utilities for the our machine. Setting <code>Diagram = true</code> includes the class in the diagram generation.</li>
<li><code>AppLogic</code>: The LogicBlocks machine that will contain our game logic in various states, taking in input and producing output based on rules we decide.
<ul>
<li><code>Input</code>: A class containing record structs that are used to send pieces of data as input into the machine.</li>
<li><code>Output</code>: A class containing record structs that are used to produce outputs from the machine, later to be consumed and reacted to in the <code>App</code> node via the <code>Binding</code>.</li>
<li><code>State</code>: An abstract state class for all our App LogicBlock states.
<ul>
<li><code>InMainMenu</code>: The state for when the app is in the main menu.</li>
<li><code>InGame</code>: The state for when the app is running the game.</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>üôãüèº Later on in the blog series we will be using the AutoInject package. This grants us access to a separate set of lifecycle methods that we should prefer!</p>
<p>For now, I will be using the standard Node lifecycle - by overriding <code>Ready</code>.</p>
</blockquote>
<h2 id="sending-and-listening-to-inputs">Sending and listening to inputs</h2>
<p>Let us add some inputs; <code>NewGameClick</code> and <code>QuitClick</code>.</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Input</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">NewGameClick</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">QuitClick</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></code></pre>
<p>We will be creating instances of these structs and send them into the machine, whenever we want to trigger logic (and typically produce outputs) in our machine.</p>
<p>Next, let‚Äôs actually send some input into the machine. We‚Äôll connect the <code>Button.Pressed</code> signals to handlers in our script. At this point, I‚Äôve added unique names to my buttons to get a hold of the references!</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">App</span> <span class="z-punctuation z-separator z-type z-cs">:</span> <span class="z-entity z-other z-inherited-class z-cs">Node</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">State</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">AppLogic</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">Logic</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs"> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-get z-cs">get</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-set z-cs">set</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-operator z-assignment z-cs">=</span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-entity z-other z-inherited-class z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-support z-type z-cs">IBinding</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">Binding</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs"> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-get z-cs">get</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-set z-cs">set</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-operator z-assignment z-cs">=</span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">Nodes</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">Button</span> <span class="z-variable z-other z-member z-cs">_newGameButton</span> <span class="z-keyword z-operator z-assignment z-variable z-cs">=</span> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">Button</span> <span class="z-variable z-other z-member z-cs">_quitButton</span> <span class="z-keyword z-operator z-assignment z-variable z-cs">=</span> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">override</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">_Ready</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> </span><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">Logic</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">Binding</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Bind</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">_newGameButton</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetNode</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Button</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>%NewGameButton<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">_quitButton</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetNode</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Button</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>%QuitButton<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">_newGameButton</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Pressed</span> <span class="z-keyword z-operator z-cs">+=</span> <span class="z-variable z-other z-cs">OnNewGameButtonPressed</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">_quitButton</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Pressed</span> <span class="z-keyword z-operator z-cs">+=</span> <span class="z-variable z-other z-cs">OnQuitButtonPressed</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnNewGameButtonPressed</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-cs">    <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Input</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">NewGameClick</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnQuitButtonPressed</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-cs">    <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Input</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">QuitClick</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> ... Rest of script omitted!
</span></span></code></pre>
<p>At this point our App script actually sends input into the AppLogic machine! However, the input falls on deaf ears as we haven‚Äôt told our states to listen to any inputs yet.</p>
<p>Let‚Äôs fix that by adding and implementing the <code>IGet&lt;T&gt;</code> interface!</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> Beginning of script omitted!
</span></span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">abstract</span> <span class="z-support z-type z-cs">record</span> <span class="z-variable z-other z-cs">State</span> : <span class="z-variable z-other z-cs">StateLogic</span>&lt;<span class="z-variable z-other z-cs">State</span><span class="z-keyword z-operator z-cs">&gt;</span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span><span class="z-source z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-variable z-other z-cs">InMainMenu</span>
</span><span class="z-source z-cs">    : <span class="z-variable z-other z-cs">State</span><span class="z-punctuation z-separator z-variables z-cs">,</span>
</span><span class="z-source z-cs">      <span class="z-variable z-other z-cs">IGet</span>&lt;<span class="z-variable z-other z-cs">Input</span>.<span class="z-variable z-other z-cs">NewGameClick</span><span class="z-keyword z-operator z-cs">&gt;</span>,
</span><span class="z-source z-cs">      <span class="z-variable z-other z-cs">IGet</span><span class="z-keyword z-operator z-cs">&lt;</span><span class="z-variable z-other z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">QuitClick</span><span class="z-keyword z-operator z-cs">&gt;</span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span><span class="z-source z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">Transition</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">On</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-modifier z-parameter z-cs">in</span> <span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">NewGameClick</span> <span class="z-variable z-parameter z-cs">input</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">      <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">InGame</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">Transition</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">On</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-modifier z-parameter z-cs">in</span> <span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">QuitClick</span> <span class="z-variable z-parameter z-cs">input</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">      <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">ClosingApplication</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-variable z-other z-cs">InGame</span> : <span class="z-variable z-other z-cs">State</span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span> <span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-variable z-other z-cs">ClosingApplication</span> : <span class="z-variable z-other z-cs">State</span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span> <span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span><span class="z-source z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span></code></pre>
<p>The interface includes the <code>Transition On&lt;T&gt;(in T input)</code> method. We‚Äôll implement them using the <code>StateLogic.To&lt;T&gt;()</code> function, returning a <code>Transition</code>. This will tell the machine what state to transition to when triggered by the input.</p>
<p>The code should now be hopping over to the other states; <code>InGame</code> and <code>ClosingApplication</code>. However, we‚Äôre not producing any outputs in the states.</p>
<h2 id="producing-and-reacting-to-outputs">Producing and reacting to outputs</h2>
<p>The happenings we want to react to are: <code>StartNewGame</code> and <code>QuitApp</code>. Let‚Äôs add them to the output!</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Output</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">StartNewGame</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">QuitApp</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></code></pre>
<p>We will be creating instances of these structs and output them from the machine. We will also bind logic to these outputs via our <code>Binding</code> in <code>App.cs</code>.</p>
<p>Also, we need to <strong>output the output</strong>. For game logic, we add the state constructor and specify what happens <code>OnEnter</code>. Tiny boilerplate incoming!</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-variable z-other z-cs">InGame</span> : <span class="z-variable z-other z-cs">State</span> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">InGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnEnter</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">StartNewGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-variable z-other z-cs">ClosingApplication</span> : <span class="z-variable z-other z-cs">State</span> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">ClosingApplication</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnEnter</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">QuitApp</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span>
</span></code></pre>
<blockquote>
<p>üôãüèº There is also the <code>OnAttach</code> and <code>OnDetach</code>. According to <a href="https://chickensoft.games/docs/logic_blocks/basics/states#-attach-and-detach-vs-entrance-and-exit">the docs</a> these should be used for housekeeping stuff, such as subscribing and unsubscribing to events.</p>
</blockquote>
<p>The final step now, is to actually <strong>react</strong> to the output from the machine via the <code>Binding</code>. We‚Äôll hop over to our <code>Ready</code> function and set up those reactions!</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">override</span> <span class="z-variable z-other z-cs">void</span> <span class="z-variable z-other z-cs">_Ready</span>(<span class="z-invalid z-illegal z-stray z-brace z-cs">)</span> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">Logic</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">Binding</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Bind</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">_newGameButton</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetNode</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Button</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>%NewGameButton<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">_quitButton</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetNode</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Button</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>%QuitButton<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">_newGameButton</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Pressed</span> <span class="z-keyword z-operator z-cs">+=</span> <span class="z-variable z-other z-cs">OnNewGameButtonPressed</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">_quitButton</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Pressed</span> <span class="z-keyword z-operator z-cs">+=</span> <span class="z-variable z-other z-cs">OnQuitButtonPressed</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW BOILERPLATE UNLOCKED
</span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">Binding</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.StartNewGame <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">      <span class="z-variable z-other z-cs">GD</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Print</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>TODO start game<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.QuitApp <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">      <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetTree</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Quit</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span>
</span></code></pre>
<p>When running the game through the editor, we can now quit the game. This proves our state machine is working!</p>
<h2 id="more-transitions-and-states">More transitions and states</h2>
<p>However, we can also get stuck in the <code>InGame</code> state, since the New Game button transitions us there. We have no way of getting out of there!</p>
<p>This is in fact perfectly illustrated by the diagrams that the LogicBlocks.DiagramGenerator package generates for us:</p>
<p><img src="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/img/appstates1.png" alt="A state machine diagram of AppLogic." /></p>
<p>To showcase the ease-of-control that LogicBlocks gives us we‚Äôll make a plan to:</p>
<ul>
<li>Add and remove <code>Game.tscn</code> when we respectively enter and exit the <code>InGame</code> state.</li>
<li>Allow for pressing Escape to return to the main menu from being in-game.</li>
<li>Add a blackout transition between being in the main menu and being in-game (and vice versa).</li>
</ul>
<h3 id="adding-and-removing-the-game">Adding and removing the game</h3>
<p>We have already added the StartNewGame output, but we‚Äôre only printing out a TODO message for now as a reaction to it.</p>
<p>Let‚Äôs replace that TODO print with a function call to a method we‚Äôll call <code>OnOutputStartNewGame</code>. I‚Äôll also refactor the <code>QuitApp</code> handler to an <code>OnOutputQuitApp</code> method and organize the output and input handlers into regions (see below).</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">App</span> <span class="z-punctuation z-separator z-type z-cs">:</span> <span class="z-entity z-other z-inherited-class z-cs">Node</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">State</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">AppLogic</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">Logic</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs"> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-get z-cs">get</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-set z-cs">set</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-operator z-assignment z-cs">=</span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-entity z-other z-inherited-class z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-support z-type z-cs">IBinding</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">Binding</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs"> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-get z-cs">get</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-set z-cs">set</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-operator z-assignment z-cs">=</span></span><span class="z-meta z-property z-cs"> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">Nodes</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-meta z-annotation z-cs"><span class="z-punctuation z-definition z-annotation z-begin z-cs">[</span><span class="z-variable z-annotation z-cs">Export</span><span class="z-punctuation z-definition z-annotation z-end z-cs">]</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">PackedScene</span> <span class="z-variable z-other z-member z-cs">_gameScene</span> <span class="z-keyword z-operator z-assignment z-variable z-cs">=</span> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW EXPORT!
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">Button</span> <span class="z-variable z-other z-member z-cs">_newGameButton</span> <span class="z-keyword z-operator z-assignment z-variable z-cs">=</span> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">Button</span> <span class="z-variable z-other z-member z-cs">_quitButton</span> <span class="z-keyword z-operator z-assignment z-variable z-cs">=</span> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">Game</span> <span class="z-variable z-other z-member z-cs">_game</span> <span class="z-keyword z-operator z-assignment z-variable z-cs">=</span> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">override</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">_Ready</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> </span><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-variable z-other z-cs">Logic</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-variable z-other z-cs">Binding</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Bind</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-variable z-other z-cs">_newGameButton</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetNode</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Button</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>%NewGameButton<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-variable z-other z-cs">_quitButton</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetNode</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Button</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>%QuitButton<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-variable z-other z-cs">_newGameButton</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Pressed</span> <span class="z-keyword z-operator z-cs">+=</span> <span class="z-variable z-other z-cs">OnNewGameButtonPressed</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-variable z-other z-cs">_quitButton</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Pressed</span> <span class="z-keyword z-operator z-cs">+=</span> <span class="z-variable z-other z-cs">OnQuitButtonPressed</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-variable z-other z-cs">Binding</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">        <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.StartNewGame <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputStartNewGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">        <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.QuitApp <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputQuitApp</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">Input Handlers</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnNewGameButtonPressed</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs"> <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Input</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">NewGameClick</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnQuitButtonPressed</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs"> <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Input</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">QuitClick</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">Output Handlers</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnOutputStartNewGame</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> </span><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-type z-variable z-cs">var</span> <span class="z-variable z-other z-cs">game</span> <span class="z-keyword z-operator z-assignment z-variable z-cs">=</span> <span class="z-variable z-other z-cs">_gameScene</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Instantiate</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Game</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">AddChild</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-variable z-other z-cs">game</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">_game</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">game</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnOutputQuitApp</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetTree</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Quit</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> code omitted
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></code></pre>
<p>We‚Äôll add the <code>_gameScene</code> export variable and set it to <code>Game.tscn</code> in Godot.</p>
<p><img src="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/img/app_export.png" alt="The app node in the inspector, Game Scene property is set to Game.tscn" /></p>
<p>The <code>OnOutputStartNewGame</code> handler simply instantiates the game, adds it as a child and stores the reference to the node in our <code>_game</code> field.</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnOutputStartNewGame</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> </span><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">_game</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">_gameScene</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Instantiate</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Game</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">AddChild</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-variable z-other z-cs">_game</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></code></pre>
<p>That should sort out adding the game whenever we get the <code>StartNewGame</code> output. If we run the game now, we realize the main menu is still shown. Let‚Äôs quickly add an output for showing and hiding the menu and call it <code>UpdateMainMenuVisibility</code>.</p>
<p>Let‚Äôs also hook the <code>Binding</code> up with a handler that actually calls the new <code>OnOutputUpdateMainMenuVisibility</code> handler, passing in the output boolean payload.</p>
<p>We want to show the main menu when we enter the InMainMenu state, and hide it when we exit it. You might already suspect what that will look like:</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> part of our App class
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">override</span> <span class="z-variable z-other z-cs">void</span> <span class="z-variable z-other z-cs">_Ready</span>(<span class="z-invalid z-illegal z-stray z-brace z-cs">)</span> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span>... code omitted
</span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">Binding</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.StartNewGame <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputStartNewGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.QuitApp <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputQuitApp</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW HANDLE
</span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.UpdateMainMenuVisibility <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> 
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">      <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputUpdateMainMenuVisibility</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-variable z-other z-cs">output</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Visible</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW HANDLER, part of our App class, in the Output Handlers region.
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnOutputUpdateMainMenuVisibility</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-type z-cs">bool</span> <span class="z-variable z-parameter z-cs">visible</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs"> 
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">  <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetNode</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Control</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>UI/MainMenu<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Visible</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">visible</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> part of our AppLogic class
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Output</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">StartNewGame</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">QuitApp</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">UpdateMainMenuVisibility</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-type z-cs">bool</span> <span class="z-variable z-parameter z-cs">Visible</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"><span class="z-punctuation z-terminator z-cs">;</span></span>  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW OUTPUT WITH PAYLOAD!
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW CONSTRUCTOR for our InMainMenu record state
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">InMainMenu</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span><span class="z-source z-cs">  <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnEnter</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">UpdateMainMenuVisibility</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-constant z-language z-cs">true</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">  <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnExit</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">UpdateMainMenuVisibility</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-constant z-language z-cs">false</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span></code></pre>
<p>That works nicely - the main menu now hides when entering the game, and our test button shows!</p>
<p>We want to remove the game when exiting InGame. We‚Äôll add an output, produce it in <code>InGame.OnExit</code> and hook up the handler to the binding.</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> part of our App class
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">override</span> <span class="z-variable z-other z-cs">void</span> <span class="z-variable z-other z-cs">_Ready</span>(<span class="z-invalid z-illegal z-stray z-brace z-cs">)</span> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> ... code omitted
</span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">Binding</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.StartNewGame <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputStartNewGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.RemoveGame <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputRemoveGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW HANDLE
</span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.QuitApp <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputQuitApp</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs">      <span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.UpdateMainMenuVisibility <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">        <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputUpdateMainMenuVisibility</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-variable z-other z-cs">output</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Visible</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">    </span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW output handler in App.cs
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnOutputRemoveGame</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> </span><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">_game</span><span class="z-punctuation z-accessor z-null-coalescing z-cs">?.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">QueueFree</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-variable z-other z-cs">_game</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-keyword z-other z-cs">default</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> part of our AppLogic class
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Output</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">StartNewGame</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">RemoveGame</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW OUTPUT
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">QuitApp</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">UpdateMainMenuVisibility</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-type z-cs">bool</span> <span class="z-variable z-parameter z-cs">Visible</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"><span class="z-punctuation z-terminator z-cs">;</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> our InGame state constructor
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">InGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span><span class="z-source z-cs">  <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnEnter</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">StartNewGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">  <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnExit</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">RemoveGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW PRODUCE OUTPUT
</span></span><span class="z-source z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span></code></pre>
<h3 id="returning-to-the-main-menu">Returning to the main menu</h3>
<p>Before we can actually return to the main menu, we need to make the <code>InGame</code> state listen to an input and transition us back to the <code>InMainMenu</code> state.</p>
<p>Now, we can opt in to using already existing inputs for this (like <code>QuitApp</code>) but I reckon it is better to make a separate one. I‚Äôll call it <code>Input.RequestQuitGame</code> and have <code>InGame</code> implement <code>IGet&lt;Input.RequestQuitGame&gt;</code>.</p>
<p>In addition to this, I‚Äôll override the <code>Node._UnhandledInput</code> method, and send the input whenever the user presses the default <code>ui_cancel</code> input by clicking Escape.</p>
<p>It looks like this:</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> in our App Node
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">override</span> <span class="z-variable z-other z-cs">void</span> <span class="z-variable z-other z-cs">_UnhandledInput</span>(<span class="z-variable z-other z-cs">InputEvent</span> <span class="z-variable z-other z-cs">@event</span><span class="z-invalid z-illegal z-stray z-brace z-cs">)</span> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs">  <span class="z-keyword z-control z-conditional z-if z-cs">if</span> <span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span><span class="z-meta z-group z-cs"><span class="z-variable z-other z-cs">@event</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">IsActionPressed</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>ui_cancel<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Input</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">RequestQuitGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-block z-cs">  </span><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> in our AppLogic class
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Input</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">NewGameClick</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">RequestQuitGame</span><span class="z-punctuation z-terminator z-statement z-cs">;</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW INPUT
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">QuitClick</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> in our AppLogic.State class
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-variable z-other z-cs">InGame</span> : <span class="z-variable z-other z-cs">State</span><span class="z-punctuation z-separator z-variables z-cs">,</span> <span class="z-variable z-other z-cs">IGet</span>&lt;<span class="z-variable z-other z-cs">Input</span>.<span class="z-variable z-other z-cs">RequestQuitGame</span><span class="z-keyword z-operator z-cs">&gt;</span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW INTERFACE
</span></span><span class="z-source z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">InGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span><span class="z-source z-cs">    <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnEnter</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">StartNewGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">    <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnExit</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">RemoveGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">Transition</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">On</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-modifier z-parameter z-cs">in</span> <span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">RequestQuitGame</span> <span class="z-variable z-parameter z-cs">input</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs"> 
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">    <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">InMainMenu</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW IMPLEMENTED INTERFACE
</span></span><span class="z-source z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span></code></pre>
<p>That does it - we can now swap between the InMainMenu and InGame states with ease! Looking at the generated diagram confirms the new transitions we made.</p>
<p><img src="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/img/appstates2.png" alt="AppLogic state diagram with the updated input, outputs and transitions." /></p>
<h3 id="intermission-quick-refactor">Intermission: Quick Refactor</h3>
<p>The <code>App.cs</code> file currently holds all code relating to the app. It‚Äôs starting to get quite long and I‚Äôd rather split it up into more files.</p>
<p>The recommended structure suggests you move the AppLogic, Inputs, Outputs and States into a <code>state</code> folder under the feature they belong to.</p>
<p>As this is the <code>app</code> feature, I break the nested classes out into their separate files and put them under the <code>src/app/state</code> or <code>src/app/state/states</code> folder.</p>
<p><img src="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/img/app-folder-structure.png" alt="Refactored logic, states, inputs and outputs into separate files and under the new state and states folders." /></p>
<h3 id="adding-a-fade-transition">Adding a fade transition</h3>
<p>It would be nice if the transition wasn‚Äôt so sudden. I‚Äôd rather have it fade out to black, have the scene change, and then fade in from black.</p>
<p>To demonstrate the ease of LogicBlocks and how we can handle this in a very human-friendly way, let me go ahead and comment it as I go along.</p>
<p>I‚Äôll be adding a <code>FadingOut</code> state, create some fitting inputs and outputs for the machine, make sure to send and listen to the inputs and also produce and handle the outputs. There‚Äôs a new concept being introduced also - you‚Äôll probably catch it!</p>
<p>On the game logic side of things, we start by adding our new Input and Outputs.</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> AppLogic.Input.cs
</span></span><span class="z-source z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Input</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">NewGameClick</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">RequestQuitGame</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">FadeOutFinished</span><span class="z-punctuation z-terminator z-statement z-cs">;</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">QuitClick</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></code></pre>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> AppLogic.Output.cs
</span></span><span class="z-source z-cs"> <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">static</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">Output</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">StartNewGame</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">RemoveGame</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">FadeOut</span><span class="z-punctuation z-terminator z-statement z-cs">;</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">FadeIn</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-variable z-other z-member z-cs">QuitApp</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">struct</span></span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">UpdateMainMenuVisibility</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-type z-cs">bool</span> <span class="z-variable z-parameter z-cs">Visible</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"><span class="z-punctuation z-terminator z-cs">;</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></code></pre>
<p>We create and implement a new state called <code>FadingOut</code>. It keeps a reference to an enum representing the action that is to be taken when the fade-out has finished. It listens to <code>Input.FadeOutFinished</code>, to know when to trigger a transition.</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">AppLogic</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-meta z-enum z-cs"><span class="z-storage z-type z-enum z-cs">enum</span> <span class="z-entity z-name z-enum z-cs">EFadeOutFinishedAction</span> </span><span class="z-meta z-enum z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-enum z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-constant z-other z-enum z-cs">StartGame</span><span class="z-punctuation z-separator z-enum z-cs">,</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-enum z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-constant z-other z-enum z-cs">BackToMainMenu</span><span class="z-punctuation z-separator z-enum z-cs">,</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-enum z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-constant z-other z-enum z-cs">QuitApp</span><span class="z-punctuation z-separator z-enum z-cs">,</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-enum z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">abstract</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">State</span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs">    <span class="z-storage z-modifier z-access z-cs">public</span> EFadeOutFinishedAction FadeOutFinishedAction { <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-get z-cs">get</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-meta z-method z-cs"><span class="z-storage z-type z-function z-accessor z-set z-cs">set</span><span class="z-punctuation z-terminator z-cs">;</span></span> <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs">    </span><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">record</span> <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">FadingOut</span></span> : <span class="z-meta z-property z-cs"><span class="z-variable z-other z-member z-cs">State</span></span><span class="z-punctuation z-separator z-variables z-cs">,</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">IGet</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-method z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">FadeOutFinished</span></span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span></span><span class="z-meta z-property z-cs"> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span></span><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs">      <span class="z-storage z-modifier z-access z-cs">public</span> FadingOut() {
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs">        this.OnEnter(() =&gt; Output(new Output.FadeOut()));
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs"><span class="z-meta z-block z-cs">      <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span><span class="z-meta z-property z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-property z-cs">      </span><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">Transition</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">On</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-modifier z-parameter z-cs">in</span> <span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">FadeOutFinished</span> <span class="z-variable z-parameter z-cs">input</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs">
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-cs">        <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Get</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">FadeOutFinishedAction</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">Action</span> <span class="z-keyword z-other z-cs">switch</span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">          <span class="z-variable z-other z-cs">EFadeOutFinishedAction</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function z-anonymous z-cs"><span class="z-variable z-parameter z-cs">StartGame</span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">InGame</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span>,
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">          <span class="z-variable z-other z-cs">EFadeOutFinishedAction</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function z-anonymous z-cs"><span class="z-variable z-parameter z-cs">BackToMainMenu</span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">InMainMenu</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span>,
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">          <span class="z-variable z-other z-cs">EFadeOutFinishedAction</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function z-anonymous z-cs"><span class="z-variable z-parameter z-cs">QuitApp</span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">ClosingApplication</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span>,
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">          <span class="z-meta z-function z-anonymous z-cs"><span class="z-variable z-parameter z-cs">_</span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span> <span class="z-keyword z-other z-cs">throw</span> <span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">System</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">NotImplementedException</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span>,
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">        <span class="z-punctuation z-section z-block z-end z-cs">}</span>;
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span><span class="z-source z-cs">  <span class="z-invalid z-illegal z-stray z-brace z-cs">}</span>
</span><span class="z-source z-cs"><span class="z-invalid z-illegal z-stray z-brace z-cs">}</span>
</span></code></pre>
<p>I update our <code>InGame</code> state to output the <code>FadeIn</code> on enter. The transition on <code>RequestQuitGame</code> is also changed to transition to <code>FadingOut</code>.</p>
<p>In addition to that, I also use the <code>Transition.With(System.Action&lt;State&gt;)</code> method, letting me perform actions on the state before transitioning to it - here setting the FadeOutFinishedAction to <code>BackToMenu</code>.</p>
<blockquote>
<p>üôãüèº I‚Äôm not entirely sure about the FadeOutFinishedAction assignment here since I‚Äôm not a fan of type casting like this.</p>
<p>It works however, so I‚Äôll let it slide for now. I suspect there are better ways to handle this.</p>
</blockquote>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> AppLogic.State.InGame.cs
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">InGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span><span class="z-source z-cs">  <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnEnter</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-punctuation z-section z-block z-begin z-cs">{</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs">    <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">StartNewGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs">    <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">FadeIn</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">  <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnExit</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">RemoveGame</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">Transition</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">On</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-modifier z-parameter z-cs">in</span> <span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">RequestQuitGame</span> <span class="z-variable z-parameter z-cs">input</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">  <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">FadingOut</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">    <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">With</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-variable z-parameter z-cs">state</span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">      <span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span><span class="z-meta z-cast z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span><span class="z-support z-type z-cs">FadingOut</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span><span class="z-variable z-other z-cs">state</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">FadeOutFinishedAction</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">EFadeOutFinishedAction</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">BackToMainMenu</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">    </span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></code></pre>
<p>I perform similar changes to the <code>InMainMenu</code> state, updating the <code>OnEnter</code> lambda and both transitions accordingly.</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> AppLogic.State.InMainMenu
</span></span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">InMainMenu</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span> <span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span><span class="z-source z-cs">  <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnEnter</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-punctuation z-section z-block z-begin z-cs">{</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs">    <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">UpdateMainMenuVisibility</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-constant z-language z-cs">true</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs">    <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">FadeIn</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">  <span class="z-variable z-language z-cs">this</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnExit</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">Output</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">UpdateMainMenuVisibility</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-constant z-language z-cs">false</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">Transition</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">On</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-modifier z-parameter z-cs">in</span> <span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">NewGameClick</span> <span class="z-variable z-parameter z-cs">input</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">    <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">FadingOut</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">      <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">With</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-variable z-parameter z-cs">state</span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW 
</span></span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">        <span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span><span class="z-meta z-cast z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span><span class="z-support z-type z-cs">FadingOut</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span><span class="z-variable z-other z-cs">state</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">FadeOutFinishedAction</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">EFadeOutFinishedAction</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">StartGame</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">      </span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-support z-type z-cs">Transition</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">On</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-storage z-modifier z-parameter z-cs">in</span> <span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">QuitClick</span> <span class="z-variable z-parameter z-cs">input</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs">
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">    <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">To</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">FadingOut</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs">      <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">With</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-variable z-parameter z-cs">state</span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span> <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> NEW 
</span></span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">        <span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span><span class="z-meta z-cast z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span><span class="z-support z-type z-cs">FadingOut</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span><span class="z-variable z-other z-cs">state</span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">FadeOutFinishedAction</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-variable z-other z-cs">EFadeOutFinishedAction</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">QuitApp</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-method z-cs"><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs">      </span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span>
</span></code></pre>
<p>On the Godot side of things, I add the following nodes:</p>
<p><img src="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/img/app-node-hierarchy1.png" alt="Added AnimationPlayer to App root node and FadeOut (ColorRect) to UI node." /></p>
<p>The FadeOut node covers the entire screen. I add two animations to the AnimationPlayer; ‚Äúfade_out‚Äù and ‚Äúfade_in‚Äù. They animate the FadeOut color from transparent to black and vice versa.</p>
<p>Finally, we connect the Godot visual layer, our <code>App</code> node to the new game logic. We add references to the animation player node, subscribe to an input handler and bind the new outputs to new handlers that perform start the fading animations.</p>
<pre data-lang="cs" class="language-cs z-code"><code class="language-cs" data-lang="cs"><span class="z-source z-cs"><span class="z-meta z-namespace z-cs"><span class="z-storage z-type z-namespace z-cs">namespace</span> <span class="z-entity z-name z-namespace z-cs">Eggsploration</span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-keyword z-control z-import z-cs">using</span> <span class="z-meta z-path z-cs">System</span><span class="z-punctuation z-terminator z-cs">;</span>
</span><span class="z-source z-cs"><span class="z-keyword z-control z-import z-cs">using</span> <span class="z-meta z-path z-cs">Godot</span><span class="z-punctuation z-terminator z-cs">;</span>
</span><span class="z-source z-cs">
</span><span class="z-source z-cs"><span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">partial</span> <span class="z-meta z-class z-cs"><span class="z-storage z-type z-class z-cs">class</span> <span class="z-entity z-name z-class z-cs">App</span> <span class="z-punctuation z-separator z-type z-cs">:</span> <span class="z-entity z-other z-inherited-class z-cs">Node</span> </span><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> state fields omitted
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">Nodes</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> existing fields omitted
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-support z-type z-cs">AnimationPlayer</span> <span class="z-variable z-other z-member z-cs">_animPlayer</span> <span class="z-keyword z-operator z-assignment z-variable z-cs">=</span> <span class="z-keyword z-other z-cs">default</span><span class="z-keyword z-operator z-cs">!</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">public</span> <span class="z-storage z-modifier z-cs">override</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">_Ready</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> </span><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> other assignments omitted
</span></span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">_animPlayer</span> <span class="z-keyword z-operator z-assignment z-cs">=</span> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">GetNode</span><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-begin z-cs">&lt;</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-support z-type z-cs">AnimationPlayer</span><span class="z-meta z-function-call z-cs"><span class="z-meta z-generic z-cs"><span class="z-punctuation z-definition z-generic z-end z-cs">&gt;</span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>AnimationPlayer<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> other assignments omitted
</span></span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">_animPlayer</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-variable z-other z-cs">AnimationFinished</span> <span class="z-keyword z-operator z-cs">+=</span> <span class="z-variable z-other z-cs">OnAnimationPlayerAnimationFinished</span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> other subscriptions omitted
</span></span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-variable z-other z-cs">Binding</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> other bindings omitted
</span></span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.FadeOut <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputFadeOut</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">      <span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Handle</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function z-anonymous z-cs"><span class="z-meta z-group z-cs">in AppLogic.Output.FadeIn <span class="z-variable z-parameter z-cs">output</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-storage z-type z-function z-lambda z-cs">=&gt;</span></span></span><span class="z-meta z-function z-anonymous z-cs"> <span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">OnOutputFadeIn</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">Input Handlers</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> other handlers omitted
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnAnimationPlayerAnimationFinished</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-support z-type z-cs">StringName</span> <span class="z-variable z-parameter z-cs">animation</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> </span><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">    <span class="z-keyword z-control z-conditional z-if z-cs">if</span> <span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span><span class="z-meta z-group z-cs"><span class="z-variable z-other z-cs">animation</span> <span class="z-keyword z-operator z-cs">==</span> <span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>fade_out<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span></span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span> <span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-begin z-cs">{</span></span><span class="z-meta z-block z-cs">
</span></span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-block z-cs">      <span class="z-variable z-other z-cs">Logic</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Input</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-meta z-instance z-cs"><span class="z-keyword z-operator z-new z-cs">new</span></span><span class="z-meta z-instance z-cs"> </span><span class="z-meta z-instance z-cs"><span class="z-support z-type z-cs">AppLogic</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">Input</span><span class="z-punctuation z-accessor z-dot z-namespace z-cs">.</span><span class="z-support z-type z-cs">FadeOutFinished</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-instance z-cs"><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-block z-cs">    </span><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span>
</span></span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-method z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">region</span> <span class="z-entity z-name z-section z-cs">Output Handlers</span></span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-comment z-line z-double-slash z-cs"><span class="z-punctuation z-definition z-comment z-cs">//</span> other handlers omitted
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnOutputFadeOut</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs"> <span class="z-variable z-other z-cs">_animPlayer</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Play</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>fade_out<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs">  <span class="z-storage z-modifier z-access z-cs">private</span> <span class="z-storage z-type z-cs">void</span> <span class="z-meta z-method z-cs"><span class="z-entity z-name z-function z-cs">OnOutputFadeIn</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-begin z-cs">(</span></span><span class="z-meta z-method z-parameters z-cs"><span class="z-punctuation z-section z-parameters z-end z-cs">)</span></span><span class="z-meta z-method z-cs"> <span class="z-storage z-type z-function z-cs">=&gt;</span></span><span class="z-meta z-method z-cs"> <span class="z-variable z-other z-cs">_animPlayer</span><span class="z-punctuation z-accessor z-dot z-cs">.</span><span class="z-meta z-function-call z-cs"><span class="z-variable z-function z-cs">Play</span><span class="z-meta z-group z-cs"><span class="z-punctuation z-section z-group z-begin z-cs">(</span></span></span><span class="z-meta z-function-call z-cs"><span class="z-meta z-group z-cs"><span class="z-string z-quoted z-double z-cs"><span class="z-punctuation z-definition z-string z-begin z-cs">&quot;</span>fade_in<span class="z-punctuation z-definition z-string z-end z-cs">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-cs">)</span></span></span></span><span class="z-punctuation z-terminator z-statement z-cs">;</span>
</span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-meta z-preprocessor z-cs">  <span class="z-keyword z-other z-preprocessor z-cs"><span class="z-punctuation z-definition z-preprocessor z-cs">#</span></span><span class="z-keyword z-other z-preprocessor z-cs">endregion</span>
</span></span></span></span><span class="z-source z-cs"><span class="z-meta z-class z-body z-cs"><span class="z-meta z-block z-cs"><span class="z-punctuation z-section z-block z-end z-cs">}</span></span></span>
</span></code></pre>
<p>Et voil√†! We have a nice fade effect as an intermediary state between main menu and game!</p>
<p><img src="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/img/fading.gif" alt="alt text" /></p>
<h1 id="wrapping-up">Wrapping up</h1>
<p>We‚Äôve finally arrived at the end.</p>
<p>The fruits of our labour might not be immediately evident, but take a look!</p>
<p><img src="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/img/appstates3.png" alt="The final AppLogic state diagram of this post." /></p>
<p>Seeing it all in front of you, I immediately realize that I‚Äôd prefer not using a generic fadeout state like this. I feel information gets lost because of the internals of the <code>FadingOut</code> state.</p>
<p>The Chickensoft GameDemo has separate <a href="https://github.com/chickensoft-games/GameDemo/blob/1405d40ddf2d1a3ba54666ca572a88e9cf90d150/src/app/state/states/LeavingMenu.cs">LeavingMenu</a> and <a href="https://github.com/chickensoft-games/GameDemo/blob/1405d40ddf2d1a3ba54666ca572a88e9cf90d150/src/app/state/states/LeavingGame.cs">LeavingGame</a> states. I think I prefer that for clarity.</p>
<blockquote>
<p>üôãüèº Admittedly, it rarely pays off trying to be smart and generalize things like I did with the <code>FadingOut</code> state. You usually end up like a dummy getting your ass bit.</p>
<p>I‚Äôll sort that out before heading in to the next part of this series.</p>
</blockquote>
<p>And speaking of the next part, we‚Äôll introduce dependency injection with <a href="https://github.com/chickensoft-games/AutoInject">AutoInject</a> and <a href="https://chickensoft.games/blog/game-architecture/#-pure-game-logic-layer">repositories</a> to help facilitate communication between game features.</p>
<p>Remember, you‚Äôre a C# developer - you either love, hate to love, or love to hate dependency injection.</p>
<p>It‚Äôs gonna be awesome!</p>
<p>Thanks for reading,<br/>
Nilsiker</p>
<p><a href="https://github.com/nilsiker/eggsploration/tree/part2">full source code available here</a></p>

    <section class="series-page-outro">
                <p><a href="https://nilsiker.github.io/blog/exploring-chickensoft/1-godotenv-and-godotgame/">&lt; previous</a> | <a href="https://nilsiker.github.io/blog/exploring-chickensoft/">üìï Exploring Chickensoft</a></p>

            </section>

        </section>

        
        
        

        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
        

    </article>
</main>

    <div id="button-container">
        
        
            <div id="toc-floating-container">
                <input type="checkbox" id="toc-toggle" class="toggle"/>
                <label for="toc-toggle" class="overlay"></label>
                <label for="toc-toggle" id="toc-button" class="button" title="Toggle Table of Contents">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg>
                </label>
                <div class="toc-content">
                    

<div class="toc-container">
    

    <ul>
        
            
            
                <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#introduction">Introduction</a>
                    
                </li>
            
        
            
            
                <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#scope">Scope</a>
                    
                </li>
            
        
            
            
                <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#implementation">Implementation</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#installing-logicblocks">Installing LogicBlocks</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#defining-app-states">Defining App states</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#sending-and-listening-to-inputs">Sending and listening to inputs</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#producing-and-reacting-to-outputs">Producing and reacting to outputs</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#more-transitions-and-states">More transitions and states</a>
                                        
                                            <ul>
                                                
                                                    
                                                        <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#adding-and-removing-the-game">Adding and removing the game</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#returning-to-the-main-menu">Returning to the main menu</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#intermission-quick-refactor">Intermission: Quick Refactor</a>
                                                            
                                                        </li>
                                                    
                                                
                                                    
                                                        <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#adding-a-fade-transition">Adding a fade transition</a>
                                                            
                                                        </li>
                                                    
                                                
                                            </ul>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://nilsiker.github.io/blog/exploring-chickensoft/2-logicblocks-app-logic/#wrapping-up">Wrapping up</a>
                    
                </li>
            
        
    </ul>
</div>


                </div>
            </div>
        

        
        

        
        <a href="#" id="top-button" class="no-hover-padding" title="Go to the top of the page">
            <svg viewBox="0 0 20 20" fill="currentColor"><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg>
        </a>
    </div>


<script defer src="https://nilsiker.github.io/js/mermaid.min.js"></script><span id="copy-success" class="hidden">
        Copied!
    </span>
    <span id="copy-init" class="hidden">
        Copy code to clipboard
    </span>
    <script defer src="https://nilsiker.github.io/js/copyCodeToClipboard.min.js"></script><script defer src="https://nilsiker.github.io/js/footnoteBacklinks.min.js"></script>
    </div>
    <footer>
    <section>
        <nav class="socials nav-navs">
                <ul>
                    
                    
                    
                    
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me"  href="https://github.com/nilsiker/">
                                    <img loading="lazy" alt="github" title="github" src="https://nilsiker.github.io/social_icons/github.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me"  href="https://instagram.com/nilsiker">
                                    <img loading="lazy" alt="instagram" title="instagram" src="https://nilsiker.github.io/social_icons/instagram.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me"  href="https://twitter.com/nilsiker">
                                    <img loading="lazy" alt="twitter" title="twitter" src="https://nilsiker.github.io/social_icons/twitter.svg">
                                </a>
                            </li>
                        
                    
                </ul>
            
        </nav>

        
        <nav class="nav-navs">
        </nav>

        <div class="credits">
            <small>
                

                
                Powered by
                <a rel=""  href="https://www.getzola.org">Zola</a>
                &amp;
                <a rel=""  href="https://github.com/welpo/tabi">tabi</a>

                </small>
        </div>
    </section>

    <div id="searchModal" class="search-modal js" role="dialog" aria-labelledby="modalTitle">
    <h1 id="modalTitle" class="visually-hidden">Search</h1>
    <div id="modal-content">
        <div id="searchBar">
            <div class="search-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                    <path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
                </svg>
            </div>
            <input id="searchInput" role="combobox" autocomplete="off" spellcheck="false" aria-expanded="false" aria-controls="results-container" placeholder="Search‚Ä¶"/>
            <div id="clear-search" class="close-icon interactive-icon" tabindex="0" role="button" title="Clear search">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                </svg>
            </div>
        </div>
        <div id="results-container">
            <div id="results-info"><span id="zero_results"> No results</span>
                <span id="one_results"> $NUMBER result</span>
                <span id="many_results"> $NUMBER results</span><span id="two_results"> $NUMBER results</span>
                <span id="few_results"> $NUMBER results</span>
            </div>
            <div id="results" role="listbox"></div>
        </div>
    </div>
</div>
</footer>

</body>

</html>
